language: node_js
node_js:
- 10
before_script:
- npm install --global @dhis2/deploy-build
script:
- npm run test
deploy:
- provider: script
  script: deploy-build
  skip_cleanup: true
  on:
    all_branches: true
- provider: script
  script: publish-build
  skip_cleanup: true
  on:
    tags: true
env:
  global:
  - secure: atFHEfp8t9+OyenPd1ml+0FqRtwSWc7pTp+jEj/RzLE7WO9atQX8Pt/ykP9zLiPXfdWEmeLVg51HdepoDqQiovNq4xJCm2fyF1z3EhDmLhRWZG5nB3x4qqayqn1+mSAbG5PA1CbhXrIJlhomLK8b3KhwhwOigEp+mh+6QrvTHcF2VVl4hqSQ8gjwRAcfb9hjeSL44w0TqG5FbksWdDz4Hog47oQMC6lWJ1BV0dZtxPORUCIPCEcMUjBBqahpJ3ovzbo7zCcpfaYernFdkFU6a5FlhaTwk6+wZ9PKS1yJIs41Wi7uHWPblqQwtANQm9CxtHm/QUiDUBSw8O25gln0GUEEMPpQB357ErQQwzPevTsJD5W9oyJNoXnt+R/Hq1sBeWU6zQ6BhJHC528kRBu2mQHnEt6HSqc+h8rLAM5gSO37vxmzh2NqASs30sGS/CiQc4tXIE/EleIMv1zNSs8kq8YTwSX32olL3/1updtxj/JY0Px2N6q0rhx+phS7ADk2XRZTyokJM9jwlgmA4dVHooeDgCjXiFbe539dJPtr2G3iw5j4lnAzTBcVOtzKqGyEY/m1ctaHB1TGp5K98kaaJeHAKzN7Aumv+VomgdKtuyKOtHiausFPczAdaajm8AqaFU1Er+5hY5+0xD1n+NWIYG9KvtXtY1CtJ9uzX0fj/yU=
  - secure: VPRRzOtMmM4OgxdIeNOlsyim2f2EbdX5NkOClUntqBFewImqefMlFEBHYBZ0dx55pGMoNAAjrVUJqNMVIofJRecMpbWHnrLpzsWxERXKepl5yFDh9x/11N3iW2qlZ/jF837OrmrKmCPRlIhTTc94hDqDFjWFUuJih5MEZwha8YoJEtob4uqrejlO8n8Y8xR9oJtiBbm+MYghdGStWChIvXjk/mV60+l7xjIkm3JKWDIIG84lpOMqxYxFK3gfPqiXsYmvbGQRb4rHLIi7wlTY8oYMFhLRuoeOfi6m267y2AsRtqcgI8cywZcCbPh17IbcfOs+2N7zZZRCra8zIWsFpCGZU3BF5uAuKELyUsu2/5DSnO27VhuRKMY1WpkNH9MBztEOyIUPPENp+9gU8f94hLopR9+L6271SgvxqZPf/9eCqm3FmftE/xMUAJUyWfXZuD9vz3YAVJ4kakg0nmTo6hv8h2tcYn1EBNvEO3ERqdf5ejlCG1SsOrOHX0d6ANbnoGZmPe6GQbeM9WGBbLMj2mYIE3+hRkQWCe2XkHSa9w1GAXhp5LzcAtIaoZ0jwKWccjR9eLpVYnsxHHodfB67+Jb90FcZlSZzdkwRVidByuNYaD1b8oH64E7EFTzn+xunWekLe9CLmAStWFGvahHqouZnvCY/+p0FVm+Q3mbalcc=
